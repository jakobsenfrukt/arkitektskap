<template>
  <button
    role="button"
    aria-label="Toggle dark/light"
    @click.prevent="toggleTheme"
    class="toggle-theme"
  >
    <span v-if="darkTheme">
      <svg viewBox="0 0 28 31" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M15.6554 31C7.0245 31 0 24.0452 0 15.5C0 6.95478 7.0245 0 15.6554 0C20.5126 0 25.0105 2.17809 28 5.97357L26.7694 8.3673C26.7149 8.3673 26.6604 8.3673 26.606 8.35652H26.5406C22.5655 8.35652 19.331 11.559 19.331 15.4946C19.331 19.4303 22.5655 22.6381 26.5406 22.6381H26.6005C26.655 22.6327 26.7149 22.6273 26.7694 22.6273L28 25.021C25.0105 28.8165 20.5072 30.9946 15.6554 30.9946V31ZM15.6554 2.96522C8.67445 2.96522 2.99494 8.58835 2.99494 15.5C2.99494 22.4117 8.67445 28.0348 15.6554 28.0348C18.6285 28.0348 21.4329 27.0266 23.6709 25.199C19.4345 23.9697 16.3361 20.0826 16.3361 15.5C16.3361 10.9174 19.4399 7.03026 23.6764 5.79565C21.4384 3.97339 18.6285 2.96522 15.6554 2.96522Z"
          fill="currentColor"
        />
      </svg>
    </span>
    <span v-else>
      <svg viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M31 16.8859V14.1341H24.765C24.66 13.4137 24.475 12.7232 24.215 12.0678L29.615 8.95078L28.24 6.56924L22.84 9.69125C22.395 9.13089 21.89 8.62557 21.33 8.18028L24.45 2.77679L22.07 1.4009L18.955 6.80439C18.3 6.54422 17.605 6.3591 16.89 6.25403V0H14.14V6.23903C13.42 6.34409 12.73 6.52921 12.075 6.78938L8.94 1.3909L6.56 2.76679L9.68 8.17027C9.12 8.61556 8.615 9.12088 8.17 9.68125L2.765 6.56424L1.39 8.94577L6.79 12.0628C6.53 12.7182 6.345 13.4137 6.24 14.1291H0V16.8809H6.235C6.34 17.6014 6.525 18.2918 6.785 18.9472L1.385 22.0642L2.76 24.4458L8.16 21.3238C8.605 21.8841 9.11 22.3894 9.67 22.8347L6.55 28.2382L8.93 29.6141L12.045 24.2106C12.7 24.4708 13.395 24.6559 14.11 24.761V31H16.86V24.761C17.58 24.6559 18.27 24.4708 18.925 24.2106L22.04 29.6141L24.42 28.2382L21.3 22.8347C21.86 22.3894 22.365 21.8841 22.81 21.3238L28.21 24.4458L29.585 22.0642L24.185 18.9472C24.445 18.2918 24.63 17.5964 24.735 16.8809H30.97L31 16.8859ZM8.875 15.51C8.875 11.8526 11.845 8.88073 15.5 8.88073C19.155 8.88073 22.125 11.8526 22.125 15.51C22.125 19.1674 19.155 22.1393 15.5 22.1393C11.845 22.1393 8.875 19.1674 8.875 15.51Z"
          fill="currentColor"
        />
      </svg>
    </span>
  </button>
</template>

<script>
export default {
  data() {
    return {
      darkTheme: false,
    };
  },
  methods: {
    toggleTheme() {
      this.darkTheme = !this.darkTheme;

      // This is using a script that is added in index.html
      window.__setPreferredTheme(this.darkTheme ? "dark" : "light");
    },
  },
  mounted() {
    if (window.__theme == "dark") this.darkTheme = true;
  },
};
</script>

<style lang="scss">
.toggle-theme {
  display: inline-block;
  background-color: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
  color: currentColor;

  svg {
    width: 100%;
  }

  &:hover {
    opacity: 0.8;
  }
  &:focus {
    outline: none;
  }
}
</style>
